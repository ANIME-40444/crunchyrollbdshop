<!DOCTYPE html><html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crunchyroll Premium BD Shop</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2.6.4/dist/email.min.js"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(to bottom, #131c2b, #202f45);
      color: white;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #0a0f1c;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    header h1 {
      margin: 0;
      color: #ff9f1c;
    }
    .container, .section, .hero {
      max-width: 700px;
      margin: 20px auto;
      background: #1c2a3a;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.4);
    }
    .container input, .container select, .container button {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      border: none;
      font-size: 16px;
    }
    .container button {
      background-color: #ff4081;
      color: white;
      cursor: pointer;
    }
    .container button:hover {
      background-color: #e23370;
    }
    .hero img {
      width: 100%;
      border-radius: 10px;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>Crunchyroll Premium BD Shop</h1>
  </header>
  <div class="container" id="signup">
    <h2>ЁЯФР рж╕рж╛ржЗржи ржЖржк</h2>
    <input type="email" id="signupEmail" placeholder="ЁЯУз ржЗржорзЗржЗрж▓">
    <input type="text" id="signupPhone" placeholder="ЁЯУ▒ ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░">
    <input type="password" id="signupPassword" placeholder="ЁЯФС ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб">
    <input type="password" id="signupConfirm" placeholder="тЬЕ ржХржиржлрж╛рж░рзНржо ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб">
    <input type="text" id="signupCity" placeholder="ЁЯПЩя╕П рж╢рж╣рж░">
    <button onclick="handleSignup()">тЬЕ рж╕рж╛ржЗржи ржЖржк ржХрж░рзБржи</button>
    <p>ржПржХрж╛ржЙржирзНржЯ ржЖржЫрзЗ? <a href="#" onclick="toggleForms('login')">ЁЯФУ рж╕рж╛ржЗржи ржЗржи ржХрж░рзБржи</a></p>
  </div>
  <div class="container hidden" id="login">
    <h2>ЁЯФУ рж╕рж╛ржЗржи ржЗржи</h2>
    <input type="email" id="loginEmail" placeholder="ЁЯУз ржЗржорзЗржЗрж▓">
    <input type="password" id="loginPassword" placeholder="ЁЯФС ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб">
    <button onclick="handleLogin()">ЁЯФР рж▓ржЧржЗржи</button>
    <p>ржирждрзБржи ржПржХрж╛ржЙржирзНржЯ? <a href="#" onclick="toggleForms('signup')">тЮХ рж╕рж╛ржЗржи ржЖржк ржХрж░рзБржи</a></p>
  </div>
  <div class="container hidden" id="orderPage">
    <h2>ЁЯЫТ ржЕрж░рзНржбрж╛рж░ ржХрж░рзБржи</h2>
    <input type="text" id="fullName" placeholder="ЁЯСд Full Name" required>
    <input type="email" id="orderEmail" placeholder="ЁЯУз Email" required>
    <input type="text" id="address" placeholder="ЁЯПа Address" required>
    <input type="text" id="mobile" placeholder="ЁЯУ▒ Mobile Number" required>
    <select id="package">
      <option value="">ЁЯУж ржПржХржЯрж┐ ржкрзНржпрж╛ржХрзЗржЬ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи</option>
      <option value="1 Month тАУ 100 TK">1 Month тАУ 100 TK</option>
      <option value="3 Months тАУ 300 TK">3 Months тАУ 300 TK</option>
    </select>
    <input type="text" id="paymentNumber" placeholder="ЁЯТ│ Payment Number" required>
    <input type="text" id="transactionId" placeholder="ЁЯз╛ Transaction ID" required>
    <select id="paymentMethod">
      <option value="">ЁЯТ░ ржкрзЗржорзЗржирзНржЯ ржорзЗржержб рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи</option>
      <option value="Bkash">Bkash</option>
      <option value="Nagad">Nagad</option>
    </select>
    <button onclick="submitOrder()">тЬЕ ржЕрж░рзНржбрж╛рж░ ржХржиржлрж╛рж░рзНржо ржХрж░рзБржи</button>
  </div>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDDvKtm-Mu_12pDLo_9bPvLOusx6YyoYI4",
      authDomain: "crunchyrollpremiumbd-shop.firebaseapp.com",
      projectId: "crunchyrollpremiumbd-shop"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();emailjs.init("5KO50jH_YdGGG_5U5"); // Replace with your EmailJS public key

function toggleForms(show) {
  document.getElementById('signup').classList.add('hidden');
  document.getElementById('login').classList.add('hidden');
  document.getElementById(show).classList.remove('hidden');
}

function isNumeric(str) {
  return /^\d{6}$/.test(str);
}

function isValidPhone(str) {
  return /^\d{11}$/.test(str);
}

function handleSignup() {
  const email = document.getElementById("signupEmail").value.trim();
  const phone = document.getElementById("signupPhone").value.trim();
  const password = document.getElementById("signupPassword").value;
  const confirm = document.getElementById("signupConfirm").value;
  const city = document.getElementById("signupCity").value.trim();

  if (!isNumeric(password)) return alert("ЁЯФР ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рзм рж╕ржВржЦрзНржпрж╛рж░ рж╕ржВржЦрзНржпрж╛ рж╣рждрзЗ рж╣ржмрзЗ!");
  if (password !== confirm) return alert("тЭМ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржорж┐рж▓ржЫрзЗ ржирж╛");
  if (!isValidPhone(phone)) return alert("ЁЯУ▒ рж╕ржарж┐ржХ рззрзз рж╕ржВржЦрзНржпрж╛рж░ ржорзЛржмрж╛ржЗрж▓ ржирж╛ржорзНржмрж╛рж░ ржжрж┐ржи");
  if (!city) return alert("ЁЯПЩя╕П ржжржпрж╝рж╛ ржХрж░рзЗ ржЖржкржирж╛рж░ рж╕рж┐ржЯрж┐ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи");

  db.collection("users").where("email", "==", email).get().then(snapshot => {
    if (!snapshot.empty) return alert("ЁЯУз ржЗржорзЗржЗрж▓ржЯрж┐ ржЗрждрзЛржоржзрзНржпрзЗ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░рзНржб!");
    db.collection("users").where("phone", "==", phone).get().then(snap => {
      if (!snap.empty) return alert("ЁЯУ▒ ржорзЛржмрж╛ржЗрж▓ ржирж╛ржорзНржмрж╛рж░ржЯрж┐ ржЗрждрзЛржоржзрзНржпрзЗ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░рзНржб!");
      db.collection("users").add({ email, phone, city, password }).then(() => {
        alert("тЬЕ рж╕рж╛ржЗржи ржЖржк рж╕ржлрж▓! ржПржЦржи рж▓ржЧржЗржи ржХрж░рзБржиред");
        toggleForms('login');
      });
    });
  });
}

function handleLogin() {
  const email = document.getElementById("loginEmail").value.trim();
  const password = document.getElementById("loginPassword").value;
  db.collection("users").where("email", "==", email).where("password", "==", password).get().then(snapshot => {
    if (snapshot.empty) return alert("тЭМ ржЗржорзЗржЗрж▓ ржмрж╛ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржнрзБрж▓!");
    document.getElementById("login").classList.add("hidden");
    document.getElementById("orderPage").classList.remove("hidden");
    document.getElementById("orderEmail").value = email;
  });
}

function submitOrder() {
  const data = {
    name: document.getElementById("fullName").value,
    email: document.getElementById("orderEmail").value,
    address: document.getElementById("address").value,
    mobile: document.getElementById("mobile").value,
    package: document.getElementById("package").value,
    payment_number: document.getElementById("paymentNumber").value,
    trans_id: document.getElementById("transactionId").value,
    payment_method: document.getElementById("paymentMethod").value,
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  };

  db.collection("orders").add(data).then(() => {
    emailjs.send("service_mwm70ph", "template_xxz2jqa", data)
    emailjs.send("service_mwm70ph", "template_p5mvbaq", data)
    alert("тЬЕ ржЕрж░рзНржбрж╛рж░ ржХржиржлрж╛рж░рзНржо рж╣ржпрж╝рзЗржЫрзЗ! ржзржирзНржпржмрж╛ржж!");
  });
}

  </script>
</body>
</html>
